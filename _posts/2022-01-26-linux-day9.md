---
title: " [linux] Day 9 Cron ~ mult user"
excerpt: ""

categories: 
    - linux
tags:
    -Blog, linux, 비전공자, 리눅스

toc: true
toc_sticky: true
published: true

date: 2022-01-26
---  

# Day 9 Cron ~ Mult User

[오늘의 시작](https://youtu.be/9SQjQthIvnE)

## <span style="color:blue"> Cron </span>
cron : 정기적으로 명령을 실행시켜주는 도구, 시스템을 말함.    
crontab -e : 하고자 하는 일을 정의할 수 있음 (여기서 원하는 편집기 선택하고 넘어가면 됨)   

가장 하단에 보면 m(minute) , h(hour), dom(Day of month), mon(month), dow(day of week) 등으로 반복 주기를 설정해 줄 수 있다.    
헷갈린다면 구글에 (crontab expression)이라고 검색해본다면 검색결과를 통해 확인해 볼 수 있다.   
~~~vim
m h dom mon dow     command
*/1 * * * *  date >> date.log 
~~~
이렇게 입력되어 있다면, 1분마다 반복, 시간, 달, 월, 요일에 상관없이 1분마다 date(현재시간을 알려주는 명령어) 명령어를 실행시켜서, 실행시킬 때 마다 date.log파일에 저장하도록 실행시킬 수 있다.   

<span style="color:#F24357; background-color:yellow;"> "corntab -l" </span> 을 사용하면 우리가 처리한 내용을 화면에 출력해준다.

우리가 설정한 명령어가 잘 작동하는지 확인하기 위해 tail 명령어를 사용할 수 있다. 
~~~vim
$ tail -f 
~~~
tail 명령어 뒤에 어떠한 파일을 주게 되면, 파일의 가장 뒷쪽에 있는 텍스트를 출력해주며, -f 라는 옵션을 주면, 자동으로 선택된 파일을 감시하고 있다가, 뒷쪽에 텍스트가 추가되면 화면을 자동으로 리프레쉬 해준다. \<\< 굉장히 편리하고, 시스템을 감시하기 위해서 필수적으로 사용한다고 한다. 

만약 에러가 생겨 작동하지 않는다면 우리는 알 수 없다. 에러가 발생하는 것을 알아내기 위해서
~~~vim
command = date.log 2>&1 
~~~
여기서 ( 2 >) 가 의미하는 것은 standard error를, (1)이 의미하는 것은 standard output을 의미하는데, 만약, 그냥 2 >1이라고 쓴다면, 표준 에러를 1이라는 파일에 저장하라는 말을 하는 것과 같다. 하지만, 우리가 원하는 것은 표준 에러를 표준 출력으로 바꿔서 저장하는 것이기 때문에 (&)을 붙여서 표준 출력으로 바꿔주라고 명령하는 것이다. 

## <span style="color:blue"> Startup script bashrc </span>

shell이 실행됐을 때 사용할 수 있는 명령어 예시 alias 
~~~vim
$ alias l='ls -al'
$ l
~~~
alias 를 가지고 'ls -al'을 간단하게 (l)을 통해 실행시킬 수 있도록 만들 수 있음   
즉, alias라는 것은 특정 명령에 별명을 붙여준 것과 같다. 

이러한 명령들을 shell or termianl을 열었을 때 실행시킨다면, 우리가 미리 지정해둔 편리한 기능들을 사용할 수 있다. 기본 쉘을 bash로 사용하고 있다면, bash의 경우 사용자가 bash를 처음 실행했을 때 어떤 특정한 파일을 실행하도록 약속되어있다. 원래는 되게 다양하고 맥락에 따라 다르기 때문에 복잡하니까 간단하게 하나의 파일을 수정하면 되는 것으로 진행할 것.    

방법   
-> 홈 디렉토리로 이동해서 파일 만들기
~~~vim 
$ nano .bashrc
~~~
이렇게 만들어 둔다면, 쉘이 실행될 때 bashrc라는 파일 안에 있는 코드를 실행하도록 약속되어 있다. 혹은, 명령 프롬포트 (현재상태를 보여주는 정보)의 형태를 바꾸거나 특정 명령을 실행했을 때, 명령이 어디에 있는지 찾는 것 ($PATH)을 변경하는 등의 일들을 시작되는 스타트업 스크립트 (.bashrc)에 코드를 위치시키면 쉘이 시작된 이후에는 이것들이 실행되면서 영향을 받게 되는 것이다. 

## <span style="color: blue"> Mult User </span>
다중사용자 시스템이 될 수록 복잡도가 훨씬 높아짐. 왜냐하면 어떠한 행위에 대해 가능, 불가능에 대한 권한의 체크가 필요하기 때문이다. 운영체제를 만드는 입장, 배워서 사용하는 입장에서도 상당히 까다롭고 복잡한 것을 공부해야한다는 점이 존재한다.   
또한 각자의 권한에 대해 잘 모르는 사람이 사용한다면, 시스템적으로 문제가 발생할 수 있다.    
유닉스계열의 시스템은 다중사용자 시스템이다. 

#### <span style="color:skyblue"> ID "나는 누구인가?" </span>
자신이 누구인지 알아보는 방법 중 하나 = identify    
터미널에서 보이는 프롬포트 부분이 id를 나타내주긴 하지만 이 부분은 커스터마이징도 가능하기 때문에 달라질 수 있다는 점을 알고 있어야 한다. 
~~~vim
$ id 
OneE@cloudshell:~$ id
uid=1000(OneE) gid=1000(OneE) groups=1000(OneE),4(adm),27(sudo),999(docker)
~~~
여기서 uid = user id, gid = group id에 해당되는데 gid는 일단 신경쓰지말고, uid만 보면 (OneE)라고 적혀있다. 이 부분을 통해 지금 내가 누구로 로그인하고 있는지 확인할 수 있다. 

#### <span style="color:skyblue"> who  " 누가 이 컴퓨터에 접속하고 있는가? "</span> 

유닉스계열에 존재하는 사용자 
1. super user (root user) : 시스템에서 전지전능한 능력을 가지고 있는 사용자
2. user : 일반적인 사용자

일시적으로 관리자의 권한을 사용하기 위해 우리는 super user do = sudo 를 사용하여 관리자만 사용할 수 있는 명령어를 사용함. 즉, 일시적으로 super user의 권한을 얻기 위해 sudo를 사용해왔다. 물론, 모든 사용자가 관리자 권한을 빌릴 수 있는 것은 아니다. 당연하게도 가능한 사람은 super user가 될 수 있는 힘을 가지고 있지만, 기본적으로는 일반 사용자처럼 사용하는 것이며, 관리자 권한을 빌려올 수 없는 사용자도 존재한다.(그냥 일반 사용자)    

시스템은 일시적으로 권한을 가지게 하는 명령어도 있지만, super user 라는 구체적인 사용자도 존재한다. 

super user가 되기 위한 절차가 필요하다.
일반적으로 super user는 root라는 이름을 가지고 있으며, 명령 프롬포트(terminal)에서 
~~~vim
OneE:~$ >> 이렇게 나오면 일반 사용자
root:~# >> 이렇게 나오면 슈퍼유저
~~~

Super user가 되면 되는 법!!   
명령어를 실행시키기 전에, 우분투와 같은 운영제체를 사용한다면 막혀있기 때문에 뒤에서 어떻게 푸는지 알려줄 것! 그게 아니라면 <span style="color:#F23383; background-color:yellow"> su</span> 라는 명령어를 통해 실행시킬 수 있다.   
<span style="color:red"> _SU - change user ID or become superuser_ </span>   
즉, 사용자를 바꾸거나 super user가 되고싶다면 su 뒤에 user name을 쓰면 실행시킬 수 있다.    
우분투 체제에서는 
~~~vim
$ sudo passwd -u root
~~~
를 사용해서 잠금을 풀 수 있는데, 여기서 -u 가 unlock을 의미한다.    
root 사용자에 대해 잠금을 다시 걸고싶다면, 
~~~vim 
$ sudo passwd -l root 
~~~ 
를 통해 잠금을 걸 수 있고, 여기서 - l 이 그 역할을 수행하도록 하는 명령어이다.   
그리고, 일반적으로 root 사용자에 대해 잠금을 걸어두는게 훨~씬 안정적이다.    

root 사용자로 접속했을 때 디렉토리가 /root라는 것은 최상위 디렉토리 밑에 있는 root라는 디렉토리가, root라는 사용자의 홈 디렉토리임을 의미한다. 일반사용자의 홈 디렉토리는 /home 밑에 존재한다.    
즉, root 사용자는 일반 사용자와는 다른 방(디렉토리)를 사용하고 있다는 것이다.    

< 사용자를 추가하는 방법 >   

외운다기보다는 검색하면 나옴 ㅎㅎ... 
검색어 : unix add user + unix user sudo 이런식으로 검색하면 어떻게 하는지 나온다.    
사용자를 추가할 때 = add user user_id


## <span style="color:blue"> 정리 </span>

1. cron : 정기적, 반복적 작업을 수행할 수 있도록 해주는 명령어. 
2. 쉘이나 터미널을 시작했을 때, 자동적으로 실행시킬 수 있도록 설정하는 것도 가능하다. ex) alias 
3. 다중사용자 
    - 다중사용자를 알아보는 방법 
        1. id: 지금 사용하고 있는 나는 누구인가?
        2. who : 누가 이 컴퓨터에 접속하고 있는가? 
4. super user    
    super user 는 어떻게 되는가? : su 명령어를 사용하거나, 우분투에서는 super user 잠금을 풀어주기 위해 sudo pass -u root 을 사용해서 가능함.    
    일반 유저를 super user로 만드는 것도, 일반 유저를 추가하는 것도 모두 가능하다. 


<span style="color:gray">    

*사담*   
*근래 조금 일이 있어서 코딩 공부에 손이 안 갔다. 이래저래 고민거리도 많고 걱정거리도 많았던거지 뭐. 지금 너무 급한 것 같다는 말들을 다시 생각해봤는데, 그 말도 맞는 것 같기도 하다. 그냥 너무 취업만을 위한 공부를 하는 거 같달까? 그래도 하나 뿌듯했던 건, 내가 혼자 리눅스 공부했던것들 (특히 터미널 다루는 법을 조금이라도 알고 있었다는 것들?)이 헛되지는 않았구나 하는 경험들을 했었다. 그거면 된거지 뭐.*  </span>